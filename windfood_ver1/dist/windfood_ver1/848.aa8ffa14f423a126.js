"use strict";(self.webpackChunkwindfood_ver1=self.webpackChunkwindfood_ver1||[]).push([[848],{6848:(E,c,a)=>{a.r(c),a.d(c,{CartRoutingModule:()=>x});var m=a(2480),p=a(2399),r=a(9401),g=a(3144),d=a(4755),h=a(4333),f=a(2018),y=a(5887),t=a(2223),b=a(6286),v=a(6464);function C(i,s){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),t._UZ(5,"img",24),t.TgZ(6,"a",25),t._UZ(7,"div",26),t.qZA()()(),t.TgZ(8,"div",27)(9,"p")(10,"strong"),t._uU(11),t.qZA()(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.qZA(),t.TgZ(16,"p"),t._uU(17,"S\u1ed1 l\u01b0\u1ee3ng: "),t._UZ(18,"input",28),t.qZA(),t.TgZ(19,"button",29),t.NdJ("click",function(){const u=t.CHM(o).index,l=t.oxw();return t.KtG(l.deleteProductCart(u))}),t._UZ(20,"i",30),t.qZA()(),t.TgZ(21,"div",31)(22,"div",32)(23,"button",33),t.NdJ("click",function(){const u=t.CHM(o).index,l=t.oxw();return t.KtG(l.decreaseQuantity(u))}),t._UZ(24,"i",34),t.qZA(),t.TgZ(25,"div",35),t._UZ(26,"input",36),t.TgZ(27,"label",37),t._uU(28,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA()(),t.TgZ(29,"button",38),t.NdJ("click",function(){const u=t.CHM(o).index,l=t.oxw();return t.KtG(l.increaseQuantity(u))}),t._UZ(30,"i",39),t.qZA()(),t.TgZ(31,"p",40),t._UZ(32,"input",41),t.qZA()()(),t._UZ(33,"hr",42),t.qZA(),t.BQk()}if(2&i){const o=s.$implicit,n=s.index;t.xp6(1),t.Q6J("formGroupName",n),t.xp6(4),t.s9C("src",null==o||null==o.products?null:o.products.urlImg,t.LSH),t.xp6(6),t.Oqu(null==o||null==o.products?null:o.products.foodName),t.xp6(2),t.hij("M\xf4 t\u1ea3: ",null==o||null==o.products?null:o.products.description,""),t.xp6(2),t.hij("Gi\xe1/1 S\u1ea3n Ph\u1ea9m: ",null==o||null==o.products?null:o.products.price," VN\u0110")}}const Z=[{path:"",children:[{path:"",component:(()=>{class i{ngOnInit(){let o=localStorage.getItem("products"),n=JSON.parse(o);this.items=n,this.cartLength=n?.length,this.paymentForm=this.fb.group({foodCards:this.fb.array([])}),this.items?.forEach(e=>{this.totalMoney=this.totalMoney+e.value*e.products?.price}),this.items?.length>0&&this.items.forEach(e=>{this.foodQuantityForm=this.fb.group({id:new r.NI(e.products.foodId),quantity:new r.NI(e.value),price:new r.NI(e.value*e.products.price)}),this.f.push(this.foodQuantityForm)}),this.totalForm=this.fb.group({summary:new r.NI(this.totalMoney)}),this.loginService.getCurrentUser().subscribe(e=>{this.user=e,console.log(this.user)})}get f(){return this.paymentForm?.controls.foodCards}constructor(o,n,e){this.fb=o,this.dialog=n,this.loginService=e,this.cartLength=0,this.totalMoney=0}increaseQuantity(o){let n=this.f.at(o).get("quantity")?.value;n++,this.f.at(o).get("price")?.setValue(n*this.items.at(o).products.price),this.f.controls.forEach(e=>{this.totalMoney+=e.get("price")?.value}),this.totalForm.get("summary")?.setValue(this.totalMoney),n>0&&this.f.at(o).get("quantity")?.setValue(n)}decreaseQuantity(o){let n=this.f.at(o).get("quantity")?.value;n--,this.f.at(o).get("price")?.setValue(n*this.items.at(o).products.price),this.totalMoney+=this.f.at(o).get("price")?.value,this.totalForm.get("summary")?.setValue(this.totalMoney),n>=0&&this.f.at(o).get("quantity")?.setValue(n)}deleteProductCart(o){}paymentFunction(){let o=[],n={};n.totalPrice=this.totalForm?.get("summary")?.value,n.creator=this.user?.person_id,this.f.controls.forEach(e=>{o.push({quantity:e.get("quantity")?.value,food:{foodId:e.get("id")?.value}})}),n.foodBills=o,console.log(n),this.dialog.open(y.p,{height:"auto",data:{cart:n}})}setTotalMoney(o){this.totalMoney=o}initForm(){this.form=this.fb.group({totalPrice:null,paymentMethod:null})}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(r.QS),t.Y36(b.uw),t.Y36(v.r))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-my-cart"]],decls:38,vars:5,consts:[[1,"gradient-custom",2,"height","100%"],[1,"container","py-5"],[1,"row","d-flex","justify-content-center","my-4"],[1,"col-md-8"],[1,"card","mb-4"],[1,"card-header","py-3"],[1,"mb-0"],[1,"row",3,"formGroup"],["formArrayName","foodCards"],[4,"ngFor","ngForOf"],[1,"card","mb-4","mb-lg-0"],[1,"card-body"],["width","45px","src","https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg","alt","Visa",1,"me-2"],["width","45px","src","https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/amex.svg","alt","American Express",1,"me-2"],["width","45px","src","https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/mastercard.svg","alt","Mastercard",1,"me-2"],[1,"col-md-4",3,"formGroup"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","border-0","px-0","mb-3"],["type","text","formControlName","summary"],["type","button",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],[1,"card-body",3,"formGroupName"],[1,"row"],[1,"col-lg-3","col-md-12","mb-4","mb-lg-0"],["data-mdb-ripple-color","light",1,"bg-image","hover-overlay","hover-zoom","ripple","rounded"],["alt","Blue Jeans Jacket",1,"w-100",3,"src"],["href","#!"],[1,"mask",2,"background-color","rgba(251, 251, 251, 0.2)"],[1,"col-lg-5","col-md-6","mb-4","mb-lg-0"],["type","text","formControlName","quantity",1,"quantity"],["type","button","data-mdb-toggle","tooltip","title","Remove item",1,"btn","btn-primary","btn-sm","me-1","mb-2",3,"click"],[1,"fas","fa-trash"],[1,"col-lg-4","col-md-6","mb-4","mb-lg-0"],[1,"d-flex","mb-4",2,"max-width","300px"],[1,"btn","btn-primary","px-3","me-2",3,"click"],[1,"fas","fa-minus"],[1,"form-outline"],["id","form1","min","0","name","quantity","formControlName","quantity","type","number",1,"form-control"],["for","form1",1,"form-label"],[1,"btn","btn-primary","px-3","ms-2",3,"click"],[1,"fas","fa-plus"],[1,"text-start","text-md-center"],["type","text","formControlName","price"],[1,"my-4"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),t._uU(7),t.qZA()(),t._uU(8),t.TgZ(9,"form",7),t.ynx(10,8),t.YNc(11,C,34,5,"ng-container",9),t.BQk(),t.qZA()(),t.TgZ(12,"div",10)(13,"div",11)(14,"p")(15,"strong"),t._uU(16,"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"),t.qZA()(),t._UZ(17,"img",12)(18,"img",13)(19,"img",14),t.qZA()()(),t.TgZ(20,"form",15)(21,"div",4)(22,"div",5)(23,"h5",6),t._uU(24,"T\u1ed5ng ti\u1ec1n"),t.qZA()(),t.TgZ(25,"div",11)(26,"ul",16)(27,"li",17)(28,"div")(29,"strong"),t._uU(30,"S\u1ed1 ti\u1ec1n c\u1ea7n thanh to\xe1n"),t.qZA(),t.TgZ(31,"strong")(32,"p",6),t._uU(33,"(\u0111\xe3 bao g\u1ed3m VAT)"),t.qZA()()(),t.TgZ(34,"span"),t._UZ(35,"input",18),t.qZA()()(),t.TgZ(36,"button",19),t.NdJ("click",function(){return n.paymentFunction()}),t._uU(37," Thanh to\xe1n "),t.qZA()()()()()()()),2&o&&(t.xp6(7),t.hij("Gi\u1ecf h\xe0ng - ",n.cartLength," s\u1ea3n ph\u1ea9m"),t.xp6(1),t.hij(" ",n.setTotalMoney(0)," "),t.xp6(1),t.Q6J("formGroup",n.paymentForm),t.xp6(2),t.Q6J("ngForOf",n.items),t.xp6(9),t.Q6J("formGroup",n.totalForm))},dependencies:[d.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,r.x0,r.CE],styles:[".gradient-custom[_ngcontent-%COMP%]{background:#6a11cb;background:linear-gradient(to right,#DE3163,rgb(37,117,252))}.quantity[_ngcontent-%COMP%]{width:50px;border-radius:4px}"]}),i})()}]}];let x=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[r.sg],imports:[d.ez,m.Bz.forChild(Z),p.d,g.JF,f.Rh,h.JX,m.Bz]}),i})()}}]);